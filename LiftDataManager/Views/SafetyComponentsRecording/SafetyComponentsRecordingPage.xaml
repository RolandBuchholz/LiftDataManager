<Page
    x:Class="LiftDataManager.Views.SafetyComponentsRecordingPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:SpeziControls="using:LiftDataManager.Controls"
    xmlns:collections="using:CommunityToolkit.Mvvm.Collections"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:dbModels="using:LiftDataManager.Core.DataAccessLayer.Models"
    xmlns:linq="using:System.Linq"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:tableView="using:WinUI.TableView"
    mc:Ignorable="d">

    <Grid x:Name="ContentArea">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>
        <StackPanel HorizontalAlignment="Right" Orientation="Horizontal">
            <TextBlock Foreground="{ThemeResource AccentAAFillColorTertiaryBrush}" Text="Sicherheitskomponentenliste schreibgeschützt. Bearbeitung über" />
            <FontIcon
                Margin="5,0,5,0"
                FontFamily="{StaticResource SymbolThemeFontFamily}"
                FontSize="16"
                Glyph="&#xE70F;" />
            <TextBlock Foreground="{ThemeResource AccentAAFillColorTertiaryBrush}" Text="Sicherheitskomponente bearbeiten" />
        </StackPanel>
        <Pivot
            Grid.Row="1"
            Margin="0,0,0,10"
            SelectedIndex="2"
            SelectedItem="{x:Bind ViewModel.SelectedPivotItem, Mode=TwoWay}">
            <Pivot.Items>
                <PivotItem Tag="CurrentSafetyComponentsPage">
                    <PivotItem.Header>
                        <TextBlock Style="{StaticResource NavigationViewItemHeaderTextStyle}" Text="Aktueller Auftrag" />
                    </PivotItem.Header>
                </PivotItem>
                <PivotItem Tag="SafetyComponentsEquipmentsPage">
                    <PivotItem.Header>
                        <TextBlock Style="{StaticResource NavigationViewItemHeaderTextStyle}" Text="Equipments" />
                    </PivotItem.Header>
                </PivotItem>
                <PivotItem Tag="SafetyComponentsRecordingPage">
                    <PivotItem.Header>
                        <TextBlock Style="{StaticResource NavigationViewItemHeaderTextStyle}" Text="Sicherheitskomponenten" />
                    </PivotItem.Header>
                </PivotItem>
            </Pivot.Items>
        </Pivot>
        <Grid Grid.Row="2">
            <tableView:TableView
                x:Name="RecordingsTableView"
                Grid.Column="0"
                Margin="0,0,5,0"
                AlternateRowBackground="{ThemeResource SystemControlPageBackgroundListLowBrush}"
                AutoGenerateColumns="False"
                CornerRadius="4"
                ItemsSource="{x:Bind ViewModel.SafetyComponentsRecordings, Mode=OneWay}"
                ShowExportOptions="True"
                ShowFilterItemsCount="True">
                <tableView:TableView.Columns>
                    <tableView:TableViewTemplateColumn
                        Width="50"
                        CanFilter="False"
                        CanResize="False"
                        CanSort="False">
                        <tableView:TableViewTemplateColumn.Header>
                            <FontIcon Glyph="&#xE70F;" ToolTipService.ToolTip="Sicherheitskomponente bearbeiten" />
                        </tableView:TableViewTemplateColumn.Header>
                        <tableView:TableViewTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <Button
                                    Margin="0"
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Center"
                                    Click="Edit_SafetyComponent_Click"
                                    CommandParameter="{Binding}">
                                    <FontIcon
                                        HorizontalAlignment="Center"
                                        VerticalAlignment="Center"
                                        FontFamily="{StaticResource SymbolThemeFontFamily}"
                                        FontSize="16"
                                        Glyph="&#xE70F;" />
                                    <ToolTipService.ToolTip>
                                        <TextBlock Text="Equipment bearbeiten" />
                                    </ToolTipService.ToolTip>
                                </Button>
                            </DataTemplate>
                        </tableView:TableViewTemplateColumn.CellTemplate>
                    </tableView:TableViewTemplateColumn>
                    <tableView:TableViewTextColumn
                        Width="125"
                        Binding="{Binding LiftCommission.Name}"
                        Header="Auftragsnr."
                        IsReadOnly="True" />
                    <tableView:TableViewTextColumn
                        Width="125"
                        Binding="{Binding LiftCommission.SAISEquipment}"
                        Header="Equipmentnr."
                        IsReadOnly="True" />
                    <tableView:TableViewTextColumn
                        Width="250"
                        Binding="{Binding Name}"
                        Header="Produktbeschreibung"
                        IsReadOnly="True" />
                    <tableView:TableViewNumberColumn
                        Width="75"
                        Binding="{Binding Release}"
                        Header="Release"
                        IsReadOnly="True" />
                    <tableView:TableViewNumberColumn
                        Width="75"
                        Binding="{Binding Revision}"
                        Header="Revision"
                        IsReadOnly="True" />
                    <tableView:TableViewTextColumn
                        Width="225"
                        Binding="{Binding IdentificationNumber}"
                        Header="Identificationr."
                        IsReadOnly="True" />
                    <tableView:TableViewTextColumn
                        Width="150"
                        Binding="{Binding SerialNumber}"
                        Header="Seriennr."
                        IsReadOnly="True" />
                    <tableView:TableViewTextColumn
                        Width="150"
                        Binding="{Binding BatchNumber}"
                        Header="Chargennr."
                        IsReadOnly="True" />
                    <tableView:TableViewTextColumn
                        Width="175"
                        Binding="{Binding SafetyComponentManufacturer.Name}"
                        CanFilter="False"
                        CanSort="False"
                        Header="Hersteller"
                        IsReadOnly="False" />
                    <tableView:TableViewTextColumn
                        Width="100"
                        Binding="{Binding SafetyComponentManufacturer.ZIPCode}"
                        Header="Postleitzahl"
                        IsReadOnly="True" />
                    <tableView:TableViewTextColumn
                        Width="100"
                        Binding="{Binding SafetyComponentManufacturer.City}"
                        Header="Stadt"
                        IsReadOnly="True" />
                    <tableView:TableViewTextColumn
                        Width="50"
                        Binding="{Binding SafetyComponentManufacturer.Country}"
                        Header="Land"
                        IsReadOnly="True" />
                </tableView:TableView.Columns>
            </tableView:TableView>
        </Grid>
    </Grid>
</Page>
