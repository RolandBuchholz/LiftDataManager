<Page
    x:Class="LiftDataManager.Views.DataBaseEditPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:controls="using:CommunityToolkit.WinUI.UI.Controls"
    xmlns:converters="using:CommunityToolkit.WinUI.Converters"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:dbmodels="using:LiftDataManager.Core.DataAccessLayer.Models"
    xmlns:interactivity="using:Microsoft.Xaml.Interactivity"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:tableView="using:WinUI.TableView"
    xmlns:ui="using:CommunityToolkit.WinUI"
    mc:Ignorable="d">
    <interactivity:Interaction.Behaviors>
        <interactivity:EventTriggerBehavior EventName="Unloaded">
            <interactivity:InvokeCommandAction Command="{x:Bind ViewModel.DataBaseEditViewModelUnloadedCommand}" />
        </interactivity:EventTriggerBehavior>
    </interactivity:Interaction.Behaviors>
    <Page.Resources>
        <converters:BoolToObjectConverter
            x:Key="InvertBoolToObjectConverter"
            FalseValue="Visible"
            TrueValue="Collapsed" />
    </Page.Resources>
    <Grid x:Name="ContentArea">
        <TextBlock
            HorizontalAlignment="Stretch"
            VerticalAlignment="Center"
            FontWeight="Bold"
            Foreground="IndianRed"
            TextWrapping="WrapWholeWords"
            Visibility="{x:Bind ViewModel.CanEditDatabase, Mode=OneWay, Converter={StaticResource InvertBoolToObjectConverter}}">
            <Run FontSize="48" Text="Die Datenbank bei nur bei aktiviertem PDM(Vault) und Adminmode bearbeitet werden!" />
            <LineBreak />
            <LineBreak />
            <Underline>
                <Run FontSize="36" Text="Info:" />
            </Underline>
            <LineBreak />
            <Run FontSize="24" Text="Adminmode und PDM(Vault) kann in den Einstellungen aktiviert werden." />
        </TextBlock>
        <Grid Visibility="{x:Bind ViewModel.CanEditDatabase, Mode=OneWay}">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>
            <TextBlock
                Grid.Row="0"
                Margin="10"
                VerticalAlignment="Bottom">
                <Run FontSize="24" Text="Datenbank " />
                <Run FontSize="20" Text="(" />
                <Run FontSize="20" Text="{x:Bind ViewModel.DataBasePath, Mode=OneWay}" />
                <Run FontSize="20" Text=")" />
            </TextBlock>
            <TabView Grid.Row="1" IsAddTabButtonVisible="False">
                <TabView.Resources>
                    <SolidColorBrush x:Key="TabViewItemHeaderBackgroundSelected" Color="Transparent" />
                </TabView.Resources>
                <TabView.TabItems>
                    <TabViewItem Header="Standard Parameter" IsClosable="False">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="*" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                            </Grid.RowDefinitions>
                            <tableView:TableView
                                x:Name="DataBaseDTOTableView"
                                Grid.Row="0"
                                Margin="10,5,10,5"
                                AlternateRowBackground="{ThemeResource SystemControlPageBackgroundListLowBrush}"
                                AutoGenerateColumns="False"
                                CornerRadius="4"
                                ItemsSource="{x:Bind ViewModel.ParameterDtos, Mode=OneWay}">
                                <interactivity:Interaction.Behaviors>
                                    <interactivity:EventTriggerBehavior EventName="CurrentCellChanged">
                                        <interactivity:InvokeCommandAction Command="{x:Bind ViewModel.CheckParameterChangedCommand}" />
                                    </interactivity:EventTriggerBehavior>
                                </interactivity:Interaction.Behaviors>
                                <tableView:TableView.Columns>
                                    <tableView:TableViewNumberColumn
                                        Width="55"
                                        Binding="{Binding Id}"
                                        Header="ID"
                                        IsReadOnly="True" />
                                    <tableView:TableViewTextColumn
                                        Width="125"
                                        Binding="{Binding ParameterTyp.Name, Mode=TwoWay}"
                                        Header="ParameterTyp" />
                                    <tableView:TableViewTextColumn
                                        Width="125"
                                        Binding="{Binding ParameterTypeCode.Name, Mode=TwoWay}"
                                        Header="TypeCode" />
                                    <tableView:TableViewTextColumn
                                        Width="175"
                                        Binding="{Binding ParameterCategory.Name, Mode=TwoWay}"
                                        Header="ParameterCategory" />
                                    <tableView:TableViewTextColumn
                                        Width="175"
                                        Binding="{Binding Name, Mode=TwoWay}"
                                        Header="Unique Name" />
                                    <tableView:TableViewTextColumn
                                        Width="175"
                                        Binding="{Binding DisplayName, Mode=TwoWay}"
                                        Header="DisplayName" />
                                    <tableView:TableViewTextColumn
                                        Width="175"
                                        Binding="{Binding Value, Mode=TwoWay}"
                                        Header="Wert" />
                                    <tableView:TableViewTemplateColumn
                                        Width="200"
                                        CanSort="True"
                                        Header="Kommentar">
                                        <tableView:TableViewTemplateColumn.CellTemplate>
                                            <DataTemplate x:DataType="dbmodels:ParameterDto">
                                                <TextBlock
                                                    Margin="10,0,10,0"
                                                    VerticalAlignment="Center"
                                                    Text="{x:Bind Comment, Mode=TwoWay}"
                                                    TextWrapping="WrapWholeWords" />
                                            </DataTemplate>
                                        </tableView:TableViewTemplateColumn.CellTemplate>
                                    </tableView:TableViewTemplateColumn>
                                    <tableView:TableViewCheckBoxColumn Width="80" Binding="{Binding IsKey, Mode=TwoWay}">
                                        <tableView:TableViewCheckBoxColumn.Header>
                                            <FontIcon Glyph="&#xE7E6;" ToolTipService.ToolTip="IsKey: Schlüsselparameter" />
                                        </tableView:TableViewCheckBoxColumn.Header>
                                    </tableView:TableViewCheckBoxColumn>
                                    <tableView:TableViewCheckBoxColumn Width="80" Binding="{Binding IsDefaultUserEditable, Mode=TwoWay}">
                                        <tableView:TableViewCheckBoxColumn.Header>
                                            <FontIcon Glyph="&#xE7EF;" ToolTipService.ToolTip="IsDefaultUserEditable: durch Standartbenutzer veränderbar" />
                                        </tableView:TableViewCheckBoxColumn.Header>
                                    </tableView:TableViewCheckBoxColumn>
                                    <tableView:TableViewCheckBoxColumn Width="80" Binding="{Binding CarDesignRelated, Mode=TwoWay}">
                                        <tableView:TableViewCheckBoxColumn.Header>
                                            <FontIcon Glyph="&#xE70A;" ToolTipService.ToolTip="CarDesignRelated: Relevant für Kabinenerstellung" />
                                        </tableView:TableViewCheckBoxColumn.Header>
                                    </tableView:TableViewCheckBoxColumn>
                                    <tableView:TableViewCheckBoxColumn Width="80" Binding="{Binding DispoPlanRelated, Mode=TwoWay}">
                                        <tableView:TableViewCheckBoxColumn.Header>
                                            <FontIcon Glyph="&#xE8BF;" ToolTipService.ToolTip="DispoPlanRelated: Relevant für Dispoplanerstellung" />
                                        </tableView:TableViewCheckBoxColumn.Header>
                                    </tableView:TableViewCheckBoxColumn>
                                    <tableView:TableViewCheckBoxColumn Width="80" Binding="{Binding LiftPanelRelated, Mode=TwoWay}">
                                        <tableView:TableViewCheckBoxColumn.Header>
                                            <FontIcon Glyph="&#xEF3D;" ToolTipService.ToolTip="LiftPanelRelated: Relevant für Tableauerstellung" />
                                        </tableView:TableViewCheckBoxColumn.Header>
                                    </tableView:TableViewCheckBoxColumn>
                                    <tableView:TableViewTextColumn
                                        Width="175"
                                        Binding="{Binding DropdownList, Mode=TwoWay}"
                                        Header="Auswahlliste" />
                                </tableView:TableView.Columns>
                            </tableView:TableView>
                            <ScrollViewer
                                Grid.Row="1"
                                Margin="10,10,10,0"
                                HorizontalScrollBarVisibility="Auto"
                                HorizontalScrollMode="Auto">
                                <Grid
                                    Margin="0,0,0,10"
                                    Padding="5"
                                    BorderThickness="1"
                                    CornerRadius="4"
                                    Style="{ThemeResource GridCardPanel}">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="147" />
                                        <ColumnDefinition Width="122" />
                                        <ColumnDefinition Width="210" />
                                        <ColumnDefinition Width="45" />
                                        <ColumnDefinition Width="150" />
                                        <ColumnDefinition Width="150" />
                                        <ColumnDefinition Width="150" />
                                        <ColumnDefinition Width="175" />
                                        <ColumnDefinition Width="35" />
                                        <ColumnDefinition Width="35" />
                                        <ColumnDefinition Width="35" />
                                        <ColumnDefinition Width="35" />
                                        <ColumnDefinition Width="35" />
                                        <ColumnDefinition Width="150" />
                                        <ColumnDefinition Width="*" />
                                    </Grid.ColumnDefinitions>
                                    <ComboBox
                                        Grid.Column="0"
                                        Margin="5"
                                        HorizontalAlignment="Stretch"
                                        DisplayMemberPath="Name"
                                        ItemsSource="{x:Bind ViewModel.ParameterTyps, Mode=OneWay}"
                                        PlaceholderText="Parametertyp"
                                        SelectedItem="{x:Bind ViewModel.SelectedParameterTyp, Mode=TwoWay}" />
                                    <ComboBox
                                        Grid.Column="1"
                                        Margin="5"
                                        HorizontalAlignment="Stretch"
                                        DisplayMemberPath="Name"
                                        ItemsSource="{x:Bind ViewModel.ParameterTypeCodes, Mode=OneWay}"
                                        PlaceholderText="TypeCode"
                                        SelectedItem="{x:Bind ViewModel.SelectedParameterTypeCode, Mode=TwoWay}" />
                                    <ComboBox
                                        Grid.Column="2"
                                        Margin="5"
                                        HorizontalAlignment="Stretch"
                                        DisplayMemberPath="Name"
                                        ItemsSource="{x:Bind ViewModel.ParameterCategorys, Mode=OneWay}"
                                        PlaceholderText="ParameterCategory"
                                        SelectedItem="{x:Bind ViewModel.SelectedParameterCategory, Mode=TwoWay}" />
                                    <TextBlock
                                        Grid.Column="3"
                                        Margin="5,7,0,7"
                                        HorizontalAlignment="Right"
                                        FontSize="18"
                                        Text="var_" />
                                    <TextBox
                                        Grid.Column="4"
                                        Margin="5"
                                        PlaceholderText="Unique Name"
                                        Text="{x:Bind ViewModel.UniqueName, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                                    <TextBox
                                        Grid.Column="5"
                                        Margin="5"
                                        PlaceholderText="DisplayName"
                                        Text="{x:Bind ViewModel.DisplayName, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                                    <TextBox
                                        Grid.Column="6"
                                        Margin="5"
                                        PlaceholderText="Wert"
                                        Text="{x:Bind ViewModel.ParameterValue, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                                    <TextBox
                                        Grid.Column="7"
                                        Margin="5"
                                        PlaceholderText="Kommentar"
                                        Text="{x:Bind ViewModel.Comment, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                                    <CheckBox
                                        Grid.Column="8"
                                        Margin="5"
                                        IsChecked="{x:Bind ViewModel.IsKey, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                                        <ToolTipService.ToolTip>
                                            <TextBlock Text="Schlüsselparameter" />
                                        </ToolTipService.ToolTip>
                                    </CheckBox>
                                    <CheckBox
                                        Grid.Column="9"
                                        Margin="5"
                                        IsChecked="{x:Bind ViewModel.IsDefaultUserEditable, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                                        <ToolTipService.ToolTip>
                                            <TextBlock Text="DefaultUserEditable" />
                                        </ToolTipService.ToolTip>
                                    </CheckBox>
                                    <CheckBox
                                        Grid.Column="10"
                                        Margin="5"
                                        IsChecked="{x:Bind ViewModel.IsCarDesignRelated, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                                        <ToolTipService.ToolTip>
                                            <TextBlock Text="CarDesignRelated: Relevant für Kabinenerstellung" />
                                        </ToolTipService.ToolTip>
                                    </CheckBox>
                                    <CheckBox
                                        Grid.Column="11"
                                        Margin="5"
                                        IsChecked="{x:Bind ViewModel.IsDispoPlanRelated, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                                        <ToolTipService.ToolTip>
                                            <TextBlock Text="DispoPlanRelated: Relevant für Dispoplanerstellung" />
                                        </ToolTipService.ToolTip>
                                    </CheckBox>
                                    <CheckBox
                                        Grid.Column="12"
                                        Margin="5"
                                        IsChecked="{x:Bind ViewModel.IsLiftPanelRelated, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                                        <ToolTipService.ToolTip>
                                            <TextBlock Text="LiftPanelRelated: Relevant für Tableauerstellung" />
                                        </ToolTipService.ToolTip>
                                    </CheckBox>
                                    <ComboBox
                                        Grid.Column="13"
                                        Margin="0,5,5,5"
                                        ItemsSource="{x:Bind ViewModel.DropdownlistTables, Mode=OneWay}"
                                        PlaceholderText="Auswahlliste"
                                        SelectedItem="{x:Bind ViewModel.SelectedDropdownlistTable, Mode=TwoWay}"
                                        Visibility="{x:Bind ViewModel.IsdropdownlistTablesVisible, Mode=OneWay}" />
                                    <Button
                                        Grid.Column="14"
                                        Width="150"
                                        Margin="0,0,0,0"
                                        HorizontalAlignment="Right"
                                        Command="{x:Bind ViewModel.AddParameterToDataBaseCommand}"
                                        Content="add Parameter"
                                        Style="{ThemeResource AccentButtonStyle}" />
                                </Grid>
                            </ScrollViewer>
                            <InfoBar
                                Grid.Row="2"
                                Margin="10,0,10,5"
                                IsClosable="False"
                                IsIconVisible="False"
                                IsOpen="True"
                                Severity="Error">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="100" />
                                        <ColumnDefinition Width="auto" />
                                        <ColumnDefinition Width="auto" />
                                        <ColumnDefinition Width="*" />
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition />
                                        <RowDefinition Height="Auto" />
                                    </Grid.RowDefinitions>
                                    <TextBlock
                                        Grid.Column="0"
                                        Margin="5,8,5,8"
                                        VerticalAlignment="Center"
                                        Text="Parameter Id" />
                                    <TextBox
                                        Grid.Column="1"
                                        Margin="5,8,5,8"
                                        HorizontalAlignment="Center"
                                        VerticalAlignment="Bottom"
                                        ui:TextBoxExtensions.ValidationMode="Dynamic"
                                        ui:TextBoxExtensions.ValidationType="Number"
                                        Text="{x:Bind ViewModel.RemoveParameterId, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                                    <TextBlock
                                        Grid.Column="2"
                                        Margin="25,8,5,8"
                                        VerticalAlignment="Center"
                                        Text="Warnung Parameter wird aus Datenbank enfernt" />
                                    <Button
                                        Grid.RowSpan="2"
                                        Grid.Column="3"
                                        Width="150"
                                        Margin="5,8,5,8"
                                        HorizontalAlignment="Right"
                                        VerticalAlignment="Bottom"
                                        Command="{x:Bind ViewModel.RemoveParameterFromDataBaseCommand}"
                                        Content="delete Parameter"
                                        Style="{ThemeResource AccentButtonStyle}" />
                                    <TextBlock
                                        Grid.Row="1"
                                        Grid.Column="0"
                                        Grid.ColumnSpan="4"
                                        Margin="5"
                                        Text="{x:Bind ViewModel.ParameterDeleteMessage, Mode=OneWay}"
                                        Visibility="{x:Bind ViewModel.ShowParameterDeleteMessage, Mode=OneWay}" />
                                </Grid>
                            </InfoBar>
                            <StackPanel
                                Grid.Row="3"
                                HorizontalAlignment="Right"
                                Orientation="Horizontal">
                                <Button
                                    Width="200"
                                    Margin="5,0,5,10"
                                    Command="{x:Bind ViewModel.UpdateAutotransferXmlCommand}"
                                    Content="Update Autotransfer-XML"
                                    Style="{ThemeResource AccentButtonStyle}" />
                                <Button
                                    Width="200"
                                    Margin="5,0,5,10"
                                    Command="{x:Bind ViewModel.ChangeParametersDataCommand}"
                                    Content="Save Changes"
                                    Style="{ThemeResource AccentButtonStyle}" />
                                <Button
                                    Width="200"
                                    Margin="5,0,15,10"
                                    Command="{x:Bind ViewModel.RefreshDataBaseCommand}"
                                    Content="Refresch Database"
                                    Style="{ThemeResource AccentButtonStyle}" />
                            </StackPanel>
                        </Grid>
                    </TabViewItem>
                    <TabViewItem
                        Height="40"
                        Header="Auswahlparameter"
                        IsClosable="False">
                        <Grid x:Name="Grd_dropdownlist">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="300" />
                                <ColumnDefinition />
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="*" />
                                <RowDefinition Height="Auto" />
                            </Grid.RowDefinitions>
                            <AutoSuggestBox
                                Grid.Row="0"
                                Grid.Column="0"
                                Margin="10"
                                PlaceholderText="Search"
                                QueryIcon="Find"
                                Text="{x:Bind ViewModel.SearchTableInput, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                            <ListView
                                Grid.Row="1"
                                Grid.Column="0"
                                ItemsSource="{x:Bind ViewModel.FilteredAllTables, Mode=OneWay}"
                                SelectedItem="{x:Bind ViewModel.SelectedTable, Mode=TwoWay}" />
                            <TextBlock
                                Grid.Row="0"
                                Grid.Column="1"
                                Margin="10"
                                FontSize="20"
                                Text="Parameter Tabelle" />
                            <tableView:TableView
                                x:Name="DataBaseTable"
                                Grid.Row="1"
                                Grid.Column="1"
                                Margin="10,5,10,5"
                                AlternateRowBackground="{ThemeResource SystemControlPageBackgroundListLowBrush}"
                                AutoGenerateColumns="True"
                                AutoGeneratingColumn="{x:Bind ViewModel.DataBaseTables_AutoGeneratingColumn}"
                                CornerRadius="4"
                                ItemsSource="{x:Bind ViewModel.DatabaseTable, Mode=OneWay}"
                                Loaded="{x:Bind ViewModel.DataBaseTable_Loaded}"
                                Visibility="{x:Bind ViewModel.ShowTable, Mode=OneWay}">
                                <interactivity:Interaction.Behaviors>
                                    <interactivity:EventTriggerBehavior EventName="CurrentCellChanged">
                                        <interactivity:InvokeCommandAction Command="{x:Bind ViewModel.CheckParameterChangedCommand}" />
                                    </interactivity:EventTriggerBehavior>
                                </interactivity:Interaction.Behaviors>
                                <tableView:TableView.Columns>
                                    <tableView:TableViewTemplateColumn Width="60">
                                        <tableView:TableViewTemplateColumn.CellTemplate>
                                            <DataTemplate>
                                                <Button
                                                    Margin="0"
                                                    HorizontalAlignment="Center"
                                                    VerticalAlignment="Center"
                                                    Click="DeleteRow_Click"
                                                    CommandParameter="{Binding}">
                                                    <FontIcon
                                                        HorizontalAlignment="Center"
                                                        VerticalAlignment="Center"
                                                        FontFamily="{StaticResource SymbolThemeFontFamily}"
                                                        FontSize="16"
                                                        Glyph="&#xE74D;" />
                                                    <ToolTipService.ToolTip>
                                                        <TextBlock Text="Parameter löschen" />
                                                    </ToolTipService.ToolTip>
                                                </Button>
                                            </DataTemplate>
                                        </tableView:TableViewTemplateColumn.CellTemplate>
                                    </tableView:TableViewTemplateColumn>
                                    <tableView:TableViewNumberColumn
                                        Width="55"
                                        Binding="{Binding Id}"
                                        Header="Id" />
                                    <tableView:TableViewNumberColumn Width="55" Binding="{Binding OrderSelection}">
                                        <tableView:TableViewNumberColumn.Header>
                                            <FontIcon Glyph="&#xE8CB;" />
                                        </tableView:TableViewNumberColumn.Header>
                                    </tableView:TableViewNumberColumn>
                                    <tableView:TableViewTextColumn
                                        Width="150"
                                        Binding="{Binding Name}"
                                        Header="Name" />
                                    <tableView:TableViewTextColumn
                                        Width="175"
                                        Binding="{Binding DisplayName}"
                                        Header="DisplayName" />
                                    <tableView:TableViewCheckBoxColumn
                                        Width="55"
                                        Binding="{Binding IsFavorite}"
                                        CanFilter="False"
                                        CanSort="False">
                                        <tableView:TableViewCheckBoxColumn.Header>
                                            <FontIcon Glyph="&#xE735;" />
                                        </tableView:TableViewCheckBoxColumn.Header>
                                    </tableView:TableViewCheckBoxColumn>
                                    <tableView:TableViewCheckBoxColumn
                                        Width="55"
                                        Binding="{Binding IsObsolete}"
                                        CanFilter="False"
                                        CanSort="False">
                                        <tableView:TableViewCheckBoxColumn.Header>
                                            <FontIcon Glyph="&#xE77A;" />
                                        </tableView:TableViewCheckBoxColumn.Header>
                                    </tableView:TableViewCheckBoxColumn>
                                    <tableView:TableViewCheckBoxColumn
                                        Width="55"
                                        Binding="{Binding SchindlerCertified}"
                                        CanFilter="False"
                                        CanSort="False">
                                        <tableView:TableViewCheckBoxColumn.Header>
                                            <FontIcon Glyph="&#xEB95;" />
                                        </tableView:TableViewCheckBoxColumn.Header>
                                    </tableView:TableViewCheckBoxColumn>
                                </tableView:TableView.Columns>
                            </tableView:TableView>
                            <StackPanel
                                Grid.Row="2"
                                Grid.Column="1"
                                HorizontalAlignment="Right"
                                Orientation="Horizontal">
                                <Button
                                    Width="200"
                                    Margin="5,0,15,10"
                                    Command="{x:Bind ViewModel.AddValueToTableCommand}"
                                    Content="Copy last row"
                                    Style="{ThemeResource AccentButtonStyle}" />
                                <Button
                                    Width="200"
                                    Margin="5,0,5,10"
                                    Command="{x:Bind ViewModel.ChangeParametersDataCommand}"
                                    Content="Update tables"
                                    Style="{ThemeResource AccentButtonStyle}" />
                            </StackPanel>
                        </Grid>
                    </TabViewItem>
                    <TabViewItem
                        Height="40"
                        Header="Datenbank Änderungensverlauf"
                        IsClosable="False">
                        <interactivity:Interaction.Behaviors>
                            <interactivity:EventTriggerBehavior EventName="Tapped">
                                <interactivity:InvokeCommandAction Command="{x:Bind ViewModel.LoadDatabaseTableValueModificationHistoryCommand}" />
                            </interactivity:EventTriggerBehavior>
                        </interactivity:Interaction.Behaviors>
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="auto" />
                                <RowDefinition Height="*" />
                            </Grid.RowDefinitions>
                            <TextBlock
                                Grid.Row="0"
                                Grid.Column="0"
                                Margin="10"
                                FontSize="24"
                                Text="Datenbank Parameteränderungen History" />
                            <tableView:TableView
                                x:Name="DataBaseDTOHistory"
                                Grid.Row="1"
                                Grid.Column="0"
                                Margin="10,5,10,5"
                                AlternateRowBackground="{ThemeResource SystemControlPageBackgroundListLowBrush}"
                                AutoGenerateColumns="False"
                                CornerRadius="4"
                                ItemsSource="{x:Bind ViewModel.TableHistory, Mode=OneWay}">
                                <tableView:TableView.Columns>
                                    <tableView:TableViewNumberColumn
                                        Width="55"
                                        Binding="{Binding Id}"
                                        Header="Id"
                                        IsReadOnly="True" />
                                    <tableView:TableViewTextColumn
                                        Width="150"
                                        Binding="{Binding Timestamp}"
                                        Header="Timestamp"
                                        IsReadOnly="True" />
                                    <tableView:TableViewTextColumn
                                        Width="150"
                                        Binding="{Binding Name}"
                                        Header="Benutzername"
                                        IsReadOnly="True" />
                                    <tableView:TableViewTextColumn
                                        Width="90"
                                        Binding="{Binding Operation}"
                                        Header="Operation"
                                        IsReadOnly="True" />
                                    <tableView:TableViewTextColumn
                                        Width="auto"
                                        Binding="{Binding TableName}"
                                        Header="Tabellenname"
                                        IsReadOnly="True" />
                                    <tableView:TableViewNumberColumn
                                        Width="55"
                                        Binding="{Binding EntityId}"
                                        Header="Id"
                                        IsReadOnly="True" />
                                    <tableView:TableViewTextColumn
                                        Width="auto"
                                        Binding="{Binding EntityName}"
                                        Header="Parametername"
                                        IsReadOnly="True" />
                                    <tableView:TableViewTextColumn
                                        Width="auto"
                                        Binding="{Binding NewEntityValue}"
                                        Header="neuer Wert"
                                        IsReadOnly="True" />
                                </tableView:TableView.Columns>
                            </tableView:TableView>
                        </Grid>
                    </TabViewItem>
                </TabView.TabItems>
            </TabView>
        </Grid>
    </Grid>
</Page>